#!@SH_PROG@
# -*- shell-script -*-

# Test that we are saving and restoring POSIX variables IFS and PS4 that
# the debugger changes.
test_save_restore_IFS_PS4()
{
    typeset  _Dbg_space_IFS=' '
    typeset old_IFS="$IFS"
    typeset new_ifs=' 	'
    IFS="$new_ifs"
    PS4='123'
    _Dbg_set_debugger_entry
    assertEquals "$_Dbg_space_IFS" "$IFS"
    assertNotEquals '123' "$PS4"
    _Dbg_set_to_return_from_debugger 0
    assertNotEquals "$_Dbg_space_IFS" "$IFS"
    assertEquals "$new_ifs" "$IFS"
    IFS="$old_IFS"
}

top_srcdir=@abs_top_srcdir@
srcdir=@srcdir@
. ${top_srcdir}/dbg-pre.sh
. ${top_srcdir}/lib/fns.sh
. ${top_srcdir}/lib/file.sh
. ${top_srcdir}/lib/save-restore.sh

# load shunit2
srcdir=@srcdir@
srcdir=${srcdir}/
. ${srcdir}/shunit2

