#!@SH_PROG@
# $Id: interrupt.sh.in,v 1.2 2008/09/05 00:11:08 rockyb Exp $

if test -z "$srcdir"  ; then
  srcdir=`pwd`
fi

if [[ @build_os@ == cygwin ]] ; then
   cat ${srcdir}/interrupt.right
   exit 77
fi

# Make sure @top_builddir@ has a trailing slash
if [ '@top_builddir@' = '' ] ; then
  echo "Something is wrong top_builddir is not set."
 exit 1
fi
top_builddir=@top_builddir@
top_builddir=${top_builddir%%/}/
source ${top_builddir}bashdb-trace -q -B -L @top_builddir@

## FIXME
## _Dbg_handler INT
## echo "print: " ${_Dbg_sig_print[2]}
## echo "stop: " ${_Dbg_sig_stop[2]}

started_markerfile=$top_builddir/test/interrupt.tst
BASHDB_QUIT_ON_QUIT=1
for i in `seq 100` ; do
   touch $started_markerfile
   sleep 5
done
